hgsat123@cloudshell:~ (my-project-64389)$ gcloud config list --format='text(core.project)'
project: my-project-64389
hgsat123@cloudshell:~ (my-project-64389)$ gcloud config set project "my-project-64389"
Updated property [core/project].


hgsat123@cloudshell:~ (my-project-64389)$ gcloud --version
Google Cloud SDK 361.0.0
alpha 2021.10.15
app-engine-go 1.9.71
app-engine-java 1.9.91
app-engine-python 1.9.96
app-engine-python-extras 1.9.96
beta 2021.10.15
bigtable
bq 2.0.71
cbt 0.10.1
cloud-build-local 0.5.2
cloud-datastore-emulator 2.1.0
core 2021.10.15
datalab 20190610
gsutil 5.4
kind 0.7.0
kpt 1.0.0-beta.6
local-extract 1.3.1
minikube 1.23.2
pubsub-emulator 0.6.0
skaffold 1.33.0

hgsat123@cloudshell:~ (my-project-64389)$ gcloud auth application-default login

You are running on a Google Compute Engine virtual machine.
The service credentials associated with this virtual machine
will automatically be used by Application Default
Credentials, so it is not necessary to use this command.

If you decide to proceed anyway, your user credentials may be visible
to others with access to this virtual machine. Are you sure you want
to authenticate with your personal account?

Do you want to continue (Y/n)?  Y

Go to the following link in your browser:

    https://accounts.google.com/o/oauth2/auth?response_type=code&client_id=764086051850-6qr4p6gpi6hn506pt8ejuq83di341hur.apps.googleusercontent.com&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob&scope=openid+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fuserinfo.email+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fcloud-platform+https%3A%2F%2Fwww.googleapis.com%2Fauth%2Faccounts.reauth&state=LOrWv8nuyrAArVUANhkNdfCS8soy60&prompt=consent&access_type=offline&code_challenge=8hWpiMtZwdwcPatOgzsiOWW8ZkECW6hQfJDu5rxExqo&code_challenge_method=S256

hgsat123@cloudshell:~ (my-project-64389)$ gcloud services enable compute.googleapis.com
hgsat123@cloudshell:~ (my-project-64389)$ gcloud services enable container.googleapis.com

hgsat123@cloudshell:~ (my-project-64389)$ gcloud container clusters list
hgsat123@cloudshell:~ (my-project-64389)$


hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$ kubectl version --client
Client Version: version.Info{Major:"1", Minor:"22", GitVersion:"v1.22.2", GitCommit:"8b5a19147530eaac9476b0ab82980b4088bbc1b2", GitTreeState:"clean", BuildDate:"2021-09-15T21:38:50Z", GoVersion:"go1.16.8", Compiler:"gc", Platform:"linux/amd64"}
hgsat123@cloudshell:~ (my-project-64389)$


hgsat123@cloudshell:~ (my-project-64389)$ gcloud config get compute/zone
ERROR: (gcloud.config) Invalid choice: 'get'.
Maybe you meant:  gcloud config configurations describe
  gcloud compute os-config inventories describe
  gcloud compute os-config os-policy-assignments describe
  gcloud compute os-config os-policy-assignments operations describe
  gcloud compute os-config patch-deployments describe
  gcloud compute os-config patch-jobs describe
  gcloud compute os-config vulnerability-reports describe
  gcloud config get-value
  gcloud config configurations activate
  gcloud config configurations create

===== set region & zone
hgsat123@cloudshell:/tmp (my-project-64389)$ gcloud compute project-info add-metadata --metadata google-compute-default-region=us-west2,google-compute-default-zo
ne=us-west2-a                                                                                                                                                    
Updated [https://www.googleapis.com/compute/v1/projects/my-project-64389].

=====

hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$ gcloud compute project-info describe --project "my-project-64389"
commonInstanceMetadata:
  fingerprint: szaApPrz1Rk=
  kind: compute#metadata
creationTimestamp: '2021-10-28T03:56:30.619-07:00'
defaultNetworkTier: PREMIUM
defaultServiceAccount: 311920159916-compute@developer.gserviceaccount.com
id: '754081919776800561'
kind: compute#project
name: my-project-64389
quotas:
- limit: 1000.0
  metric: SNAPSHOTS
  usage: 0.0
- limit: 5.0
  metric: NETWORKS
  usage: 1.0
- limit: 100.0
  metric: FIREWALLS
  usage: 4.0
- limit: 100.0
  metric: IMAGES
  usage: 0.0
- limit: 8.0
  metric: STATIC_ADDRESSES
  usage: 0.0
- limit: 200.0
  metric: ROUTES
  usage: 1.0
- limit: 15.0
  metric: FORWARDING_RULES
  usage: 0.0
- limit: 50.0
  metric: TARGET_POOLS
  usage: 0.0
- limit: 50.0
  metric: HEALTH_CHECKS
  usage: 0.0
- limit: 4.0
  metric: IN_USE_ADDRESSES
  usage: 0.0
- limit: 50.0
  metric: TARGET_INSTANCES
  usage: 0.0
- limit: 10.0
  metric: TARGET_HTTP_PROXIES
  usage: 0.0
- limit: 10.0
  metric: URL_MAPS
  usage: 0.0
- limit: 50.0
  metric: BACKEND_SERVICES
  usage: 0.0
- limit: 100.0
  metric: INSTANCE_TEMPLATES
  usage: 0.0
- limit: 5.0
  metric: TARGET_VPN_GATEWAYS
  usage: 0.0
- limit: 10.0
  metric: VPN_TUNNELS
  usage: 0.0
- limit: 3.0
  metric: BACKEND_BUCKETS
  usage: 0.0
- limit: 10.0
  metric: ROUTERS
  usage: 0.0
- limit: 10.0
  metric: TARGET_SSL_PROXIES
  usage: 0.0
- limit: 10.0
  metric: TARGET_HTTPS_PROXIES
  usage: 0.0
- limit: 10.0
  metric: SSL_CERTIFICATES
  usage: 0.0
- limit: 100.0
  metric: SUBNETWORKS
  usage: 29.0
- limit: 10.0
  metric: TARGET_TCP_PROXIES
  usage: 0.0
- limit: 12.0
  metric: CPUS_ALL_REGIONS
  usage: 0.0
- limit: 0.0
  metric: SECURITY_POLICIES
  usage: 0.0
- limit: 0.0
  metric: SECURITY_POLICY_RULES
  usage: 0.0
- limit: 1000.0
  metric: XPN_SERVICE_PROJECTS
  usage: 0.0
- limit: 20.0
  metric: PACKET_MIRRORINGS
  usage: 0.0
- limit: 100.0
  metric: NETWORK_ENDPOINT_GROUPS
  usage: 0.0
- limit: 6.0
  metric: INTERCONNECTS
  usage: 0.0
- limit: 5000.0
  metric: GLOBAL_INTERNAL_ADDRESSES
  usage: 0.0
- limit: 5.0
  metric: VPN_GATEWAYS
  usage: 0.0
- limit: 100.0
  metric: MACHINE_IMAGES
  usage: 0.0
- limit: 0.0
  metric: SECURITY_POLICY_CEVAL_RULES
  usage: 0.0
- limit: 0.0
  metric: GPUS_ALL_REGIONS
  usage: 0.0
- limit: 5.0
  metric: EXTERNAL_VPN_GATEWAYS
  usage: 0.0
- limit: 1.0
  metric: PUBLIC_ADVERTISED_PREFIXES
  usage: 0.0
- limit: 10.0
  metric: PUBLIC_DELEGATED_PREFIXES
  usage: 0.0
- limit: 128.0
  metric: STATIC_BYOIP_ADDRESSES
  usage: 0.0
- limit: 15.0
  metric: INTERNAL_TRAFFIC_DIRECTOR_FORWARDING_RULES
  usage: 0.0
selfLink: https://www.googleapis.com/compute/v1/projects/my-project-64389
xpnProjectStatus: UNSPECIFIED_XPN_PROJECT_STATUS

====
region: us-west2
zone: us-west2-a
account: hgsat123@gmail.com
project: my-project-64389
+++++++++++

hgsat123@cloudshell:~ (my-project-64389)$ gcloud container clusters create mytest --num-nodes 3 --scopes "https://www.googleapis.com/auth/projecthosting,storage-rw"
WARNING: Starting in January 2021, clusters will use the Regular release channel by default when `--cluster-version`, `--release-channel`, `--no-enable-autoupgrade`, and `--no-enable-autorepair` flags are not specified.
WARNING: Currently VPC-native is the default mode during cluster creation for versions greater than 1.21.0-gke.1500. To create advanced routes based clusters, please pass the `--no-enable-ip-alias` flag
WARNING: Starting with version 1.18, clusters will have shielded GKE nodes by default.
WARNING: Your Pod address range (`--cluster-ipv4-cidr`) can accommodate at most 1008 node(s).
WARNING: Starting with version 1.19, newly created clusters and node-pools will have COS_CONTAINERD as the default node image when no image type is specified.
Creating cluster mytest in us-west2-a...done.     
Created [https://container.googleapis.com/v1/projects/my-project-64389/zones/us-west2-a/clusters/mytest].
To inspect the contents of your cluster, go to: https://console.cloud.google.com/kubernetes/workload_/gcloud/us-west2-a/mytest?project=my-project-64389
kubeconfig entry generated for mytest.
NAME: mytest
LOCATION: us-west2-a
MASTER_VERSION: 1.20.10-gke.301
MASTER_IP: 35.236.84.176
MACHINE_TYPE: e2-medium
NODE_VERSION: 1.20.10-gke.301
NUM_NODES: 3
STATUS: RUNNING
hgsat123@cloudshell:~ (my-project-64389)$

hgsat123@cloudshell:~ (my-project-64389)$ kubectl get nodes
NAME                                    STATUS   ROLES    AGE   VERSION
gke-mytest-default-pool-68a56948-514v   Ready    <none>   73s   v1.20.10-gke.301
gke-mytest-default-pool-68a56948-ph6b   Ready    <none>   73s   v1.20.10-gke.301
gke-mytest-default-pool-68a56948-r411   Ready    <none>   73s   v1.20.10-gke.301
hgsat123@cloudshell:~ (my-project-64389)$ kubectl get po
No resources found in default namespace.


hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$ gcloud container clusters get-credentials mytestFetching cluster endpoint and auth data.
kubeconfig entry generated for mytest.hgsat123@cloudshell:~ (my-project-64389)$

hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$  export CURRENT_CONTEXT=$(kubectl config current-context) && export CURRENT_CLUSTER=$(kubectl config view -o go-template="{{\$curr_context := \"$CURRENT_CONTEXT\" }}{{range .contexts}}{{if eq .name \$curr_context}}{{.context.cluster}}{{end}}{{end}}") && echo $(kubectl config view -o go-template="{{\$cluster_context := \"$CURRENT_CLUSTER\"}}{{range .clusters}}{{if eq .name \$cluster_context}}{{.cluster.server}}{{end}}{{end}}")
https://35.236.84.176
hgsat123@cloudshell:~ (my-project-64389)$

hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$ echo $CURRENT_CONTEXT
gke_my-project-64389_us-west2-a_mytest
hgsat123@cloudshell:~ (my-project-64389)$

hgsat123@cloudshell:~ (my-project-64389)$ kubectl create ns monitoring
namespace/monitoring created
hgsat123@cloudshell:~ (my-project-64389)$ kubectl get po
No resources found in default namespace.
hgsat123@cloudshell:~ (my-project-64389)$ kubectl get ns
NAME              STATUS   AGE
default           Active   8m31s
kube-node-lease   Active   8m33s
kube-public       Active   8m33s
kube-system       Active   8m33s
monitoring        Active   15s
hgsat123@cloudshell:~ (my-project-64389)$ kubectl get po -n kube-system
NAME                                               READY   STATUS    RESTARTS   AGE
event-exporter-gke-67986489c8-k7nm8                2/2     Running   0          8m2s
fluentbit-gke-27s9x                                2/2     Running   0          7m48s
fluentbit-gke-5d8rn                                2/2     Running   0          7m48s
fluentbit-gke-ncbch                                2/2     Running   0          7m47s
gke-metrics-agent-766nr                            1/1     Running   0          7m47s
gke-metrics-agent-dggzr                            1/1     Running   0          7m48s
gke-metrics-agent-wz6jv                            1/1     Running   0          7m47s
konnectivity-agent-6c974dbc6b-rmm52                1/1     Running   0          7m57s
konnectivity-agent-6c974dbc6b-sfkh4                1/1     Running   0          7m9s
konnectivity-agent-6c974dbc6b-xszm6                1/1     Running   0          7m9s
konnectivity-agent-autoscaler-6cb774c9cc-fc87j     1/1     Running   0          7m56s
kube-dns-autoscaler-844c9d9448-9m785               1/1     Running   0          7m57s
kube-dns-b4f5c58c7-6v5xg                           4/4     Running   0          7m57s
kube-dns-b4f5c58c7-xdd6k                           4/4     Running   0          7m23s
kube-proxy-gke-mytest-default-pool-68a56948-514v   1/1     Running   0          6m20s
kube-proxy-gke-mytest-default-pool-68a56948-ph6b   1/1     Running   0          6m36s
kube-proxy-gke-mytest-default-pool-68a56948-r411   1/1     Running   0          7m37s
l7-default-backend-56cb9644f6-xk2xk                1/1     Running   0          8m3s
metrics-server-v0.3.6-9c5bbf784-2fr7c              2/2     Running   0          7m4s
pdcsi-node-gdnlz                                   2/2     Running   0          7m48s
pdcsi-node-mdrh5                                   2/2     Running   0          7m48s
pdcsi-node-p2c5j                                   2/2     Running   0          7m48s
hgsat123@cloudshell:~ (my-project-64389)$

hgsat123@cloudshell:~ (my-project-64389)$ kubectl describe nodes
Name:               gke-mytest-default-pool-68a56948-514v
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/instance-type=e2-medium
                    beta.kubernetes.io/os=linux
                    cloud.google.com/gke-boot-disk=pd-standard
                    cloud.google.com/gke-container-runtime=containerd
                    cloud.google.com/gke-nodepool=default-pool
                    cloud.google.com/gke-os-distribution=cos
                    cloud.google.com/machine-family=e2
                    failure-domain.beta.kubernetes.io/region=us-west2
                    failure-domain.beta.kubernetes.io/zone=us-west2-a
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=gke-mytest-default-pool-68a56948-514v
                    kubernetes.io/os=linux
                    node.kubernetes.io/instance-type=e2-medium
                    topology.gke.io/zone=us-west2-a
                    topology.kubernetes.io/region=us-west2
                    topology.kubernetes.io/zone=us-west2-a
Annotations:        container.googleapis.com/instance_id: 2145750799418268573
                    csi.volume.kubernetes.io/nodeid:
                      {"pd.csi.storage.gke.io":"projects/my-project-64389/zones/us-west2-a/instances/gke-mytest-default-pool-68a56948-514v"}
                    node.alpha.kubernetes.io/ttl: 0
                    node.gke.io/last-applied-node-labels:
                      cloud.google.com/gke-boot-disk=pd-standard,cloud.google.com/gke-container-runtime=containerd,cloud.google.com/gke-nodepool=default-pool,cl...
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Fri, 29 Oct 2021 07:42:38 +0000
Taints:             <none>
Unschedulable:      false
Lease:
  HolderIdentity:  gke-mytest-default-pool-68a56948-514v
  AcquireTime:     <unset>
  RenewTime:       Fri, 29 Oct 2021 07:52:06 +0000
Conditions:
  Type                          Status  LastHeartbeatTime                 LastTransitionTime                Reason                          Message
  ----                          ------  -----------------                 ------------------                ------                          -------
  KernelDeadlock                False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   KernelHasNoDeadlock             kernel has no deadlock
  ReadonlyFilesystem            False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   FilesystemIsNotReadOnly         Filesystem is not read-only
  FrequentUnregisterNetDevice   False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   NoFrequentUnregisterNetDevice   node is functioning properly
  CorruptDockerOverlay2         False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   NoCorruptDockerOverlay2         docker overlay2 is functioning properly
  FrequentKubeletRestart        False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   NoFrequentKubeletRestart        kubelet is functioning properly
  FrequentDockerRestart         False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   NoFrequentDockerRestart         docker is functioning properly
  FrequentContainerdRestart     False   Fri, 29 Oct 2021 07:47:42 +0000   Fri, 29 Oct 2021 07:42:40 +0000   NoFrequentContainerdRestart     containerd is functioning properly
  NetworkUnavailable            False   Fri, 29 Oct 2021 07:42:55 +0000   Fri, 29 Oct 2021 07:42:55 +0000   RouteCreated                    RouteController created a route
  MemoryPressure                False   Fri, 29 Oct 2021 07:49:00 +0000   Fri, 29 Oct 2021 07:42:26 +0000   KubeletHasSufficientMemory      kubelet has sufficient memory available
  DiskPressure                  False   Fri, 29 Oct 2021 07:49:00 +0000   Fri, 29 Oct 2021 07:42:26 +0000   KubeletHasNoDiskPressure        kubelet has no disk pressure
  PIDPressure                   False   Fri, 29 Oct 2021 07:49:00 +0000   Fri, 29 Oct 2021 07:42:26 +0000   KubeletHasSufficientPID         kubelet has sufficient PID available
  Ready                         True    Fri, 29 Oct 2021 07:49:00 +0000   Fri, 29 Oct 2021 07:42:53 +0000   KubeletReady                    kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:   10.168.0.4
  ExternalIP:   34.102.1.47
  InternalDNS:  gke-mytest-default-pool-68a56948-514v.us-west2-a.c.my-project-64389.internal
  Hostname:     gke-mytest-default-pool-68a56948-514v.us-west2-a.c.my-project-64389.internal
Capacity:
  attachable-volumes-gce-pd:  15
  cpu:                        2
  ephemeral-storage:          98868448Ki
  hugepages-1Gi:              0
  hugepages-2Mi:              0
  memory:                     4031628Ki
  pods:                       110
Allocatable:
  attachable-volumes-gce-pd:  15
  cpu:                        940m
  ephemeral-storage:          47093746742
  hugepages-1Gi:              0
  hugepages-2Mi:              0
  memory:                     2885772Ki
  pods:                       110
System Info:
  Machine ID:                 3c40fa130ff3231bc707b1b153e6601c
  System UUID:                3c40fa13-0ff3-231b-c707-b1b153e6601c
  Boot ID:                    eac0748b-b2d2-460e-8bef-a3e84d6c1a3a
  Kernel Version:             5.4.120+
  OS Image:                   Container-Optimized OS from Google
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.4.4
  Kubelet Version:            v1.20.10-gke.301
  Kube-Proxy Version:         v1.20.10-gke.301
PodCIDR:                      10.0.0.0/24
PodCIDRs:                     10.0.0.0/24
ProviderID:                   gce://my-project-64389/us-west2-a/gke-mytest-default-pool-68a56948-514v
Non-terminated Pods:          (6 in total)
  Namespace                   Name                                                CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                                                ------------  ----------  ---------------  -------------  ---
  kube-system                 fluentbit-gke-5d8rn                                 100m (10%)    0 (0%)      200Mi (7%)       500Mi (17%)    9m33s
  kube-system                 gke-metrics-agent-dggzr                             3m (0%)       0 (0%)      50Mi (1%)        50Mi (1%)      9m33s
  kube-system                 konnectivity-agent-6c974dbc6b-sfkh4                 0 (0%)        0 (0%)      30Mi (1%)        30Mi (1%)      8m54s
  kube-system                 kube-dns-b4f5c58c7-6v5xg                            260m (27%)    0 (0%)      110Mi (3%)       210Mi (7%)     9m42s
  kube-system                 kube-proxy-gke-mytest-default-pool-68a56948-514v    100m (10%)    0 (0%)      0 (0%)           0 (0%)         8m5s
  kube-system                 pdcsi-node-mdrh5                                    10m (1%)      0 (0%)      20Mi (0%)        100Mi (3%)     9m33s
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource                   Requests     Limits
  --------                   --------     ------
  cpu                        473m (50%)   0 (0%)
  memory                     410Mi (14%)  890Mi (31%)
  ephemeral-storage          0 (0%)       0 (0%)
  hugepages-1Gi              0 (0%)       0 (0%)
  hugepages-2Mi              0 (0%)       0 (0%)
  attachable-volumes-gce-pd  0            0
Events:
  Type     Reason                   Age                    From             Message
  ----     ------                   ----                   ----             -------
  Normal   Starting                 10m                    kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      10m                    kubelet          invalid capacity 0 on image filesystem
  Normal   NodeAllocatableEnforced  10m                    kubelet          Updated Node Allocatable limit across pods
  Normal   NodeHasNoDiskPressure    10m (x7 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-514v status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     10m (x7 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-514v status is now: NodeHasSufficientPID
  Normal   NodeHasSufficientMemory  10m (x8 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-514v status is now: NodeHasSufficientMemory
  Normal   Starting                 9m33s                  kube-proxy       Starting kube-proxy.
  Warning  ContainerdStart          9m31s (x2 over 9m31s)  systemd-monitor  Starting containerd container runtime...
  Warning  DockerStart              9m31s (x3 over 9m31s)  systemd-monitor  Starting Docker Application Container Engine...
  Warning  KubeletStart             9m31s                  systemd-monitor  Started Kubernetes kubelet.
  Warning  NodeSysctlChange         9m31s                  sysctl-monitor   {"unmanaged": {"net.netfilter.nf_conntrack_buckets": "32768"}}


Name:               gke-mytest-default-pool-68a56948-ph6b
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/instance-type=e2-medium
                    beta.kubernetes.io/os=linux
                    cloud.google.com/gke-boot-disk=pd-standard
                    cloud.google.com/gke-container-runtime=containerd
                    cloud.google.com/gke-nodepool=default-pool
                    cloud.google.com/gke-os-distribution=cos
                    cloud.google.com/machine-family=e2
                    failure-domain.beta.kubernetes.io/region=us-west2
                    failure-domain.beta.kubernetes.io/zone=us-west2-a
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=gke-mytest-default-pool-68a56948-ph6b
                    kubernetes.io/os=linux
                    node.kubernetes.io/instance-type=e2-medium
                    topology.gke.io/zone=us-west2-a
                    topology.kubernetes.io/region=us-west2
                    topology.kubernetes.io/zone=us-west2-a
Annotations:        container.googleapis.com/instance_id: 6307942806414826397
                    csi.volume.kubernetes.io/nodeid:
                      {"pd.csi.storage.gke.io":"projects/my-project-64389/zones/us-west2-a/instances/gke-mytest-default-pool-68a56948-ph6b"}
                    node.alpha.kubernetes.io/ttl: 0
                    node.gke.io/last-applied-node-labels:
                      cloud.google.com/gke-boot-disk=pd-standard,cloud.google.com/gke-container-runtime=containerd,cloud.google.com/gke-nodepool=default-pool,cl...
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Fri, 29 Oct 2021 07:42:38 +0000
Taints:             <none>
Unschedulable:      false
Lease:
  HolderIdentity:  gke-mytest-default-pool-68a56948-ph6b
  AcquireTime:     <unset>
  RenewTime:       Fri, 29 Oct 2021 07:52:06 +0000
Conditions:
  Type                          Status  LastHeartbeatTime                 LastTransitionTime                Reason                          Message
  ----                          ------  -----------------                 ------------------                ------                          -------
  ReadonlyFilesystem            False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   FilesystemIsNotReadOnly         Filesystem is not read-only
  CorruptDockerOverlay2         False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoCorruptDockerOverlay2         docker overlay2 is functioning properly
  FrequentUnregisterNetDevice   False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentUnregisterNetDevice   node is functioning properly
  FrequentKubeletRestart        False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentKubeletRestart        kubelet is functioning properly
  FrequentDockerRestart         False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentDockerRestart         docker is functioning properly
  FrequentContainerdRestart     False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentContainerdRestart     containerd is functioning properly
  KernelDeadlock                False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   KernelHasNoDeadlock             kernel has no deadlock
  NetworkUnavailable            False   Fri, 29 Oct 2021 07:42:55 +0000   Fri, 29 Oct 2021 07:42:55 +0000   RouteCreated                    RouteController created a route
  MemoryPressure                False   Fri, 29 Oct 2021 07:48:30 +0000   Fri, 29 Oct 2021 07:42:27 +0000   KubeletHasSufficientMemory      kubelet has sufficient memory available
  DiskPressure                  False   Fri, 29 Oct 2021 07:48:30 +0000   Fri, 29 Oct 2021 07:42:27 +0000   KubeletHasNoDiskPressure        kubelet has no disk pressure
  PIDPressure                   False   Fri, 29 Oct 2021 07:48:30 +0000   Fri, 29 Oct 2021 07:42:27 +0000   KubeletHasSufficientPID         kubelet has sufficient PID available
  Ready                         True    Fri, 29 Oct 2021 07:48:30 +0000   Fri, 29 Oct 2021 07:42:48 +0000   KubeletReady                    kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:   10.168.0.3
  ExternalIP:   34.94.55.24
  InternalDNS:  gke-mytest-default-pool-68a56948-ph6b.us-west2-a.c.my-project-64389.internal
  Hostname:     gke-mytest-default-pool-68a56948-ph6b.us-west2-a.c.my-project-64389.internal
Capacity:
  attachable-volumes-gce-pd:  15
  cpu:                        2
  ephemeral-storage:          98868448Ki
  hugepages-1Gi:              0
  hugepages-2Mi:              0
  memory:                     4031628Ki
  pods:                       110
Allocatable:
  attachable-volumes-gce-pd:  15
  cpu:                        940m
  ephemeral-storage:          47093746742
  hugepages-1Gi:              0
  hugepages-2Mi:              0
  memory:                     2885772Ki
  pods:                       110
System Info:
  Machine ID:                 338acaed999c375241fa912681e4f8d0
  System UUID:                338acaed-999c-3752-41fa-912681e4f8d0
  Boot ID:                    11af2de3-7603-469c-9f89-639a79870a46
  Kernel Version:             5.4.120+
  OS Image:                   Container-Optimized OS from Google
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.4.4
  Kubelet Version:            v1.20.10-gke.301
  Kube-Proxy Version:         v1.20.10-gke.301
PodCIDR:                      10.0.1.0/24
PodCIDRs:                     10.0.1.0/24
ProviderID:                   gce://my-project-64389/us-west2-a/gke-mytest-default-pool-68a56948-ph6b
Non-terminated Pods:          (7 in total)
  Namespace                   Name                                                CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                                                ------------  ----------  ---------------  -------------  ---
  kube-system                 fluentbit-gke-27s9x                                 100m (10%)    0 (0%)      200Mi (7%)       500Mi (17%)    9m34s
  kube-system                 gke-metrics-agent-wz6jv                             3m (0%)       0 (0%)      50Mi (1%)        50Mi (1%)      9m33s
  kube-system                 konnectivity-agent-6c974dbc6b-rmm52                 0 (0%)        0 (0%)      30Mi (1%)        30Mi (1%)      9m43s
  kube-system                 kube-dns-autoscaler-844c9d9448-9m785                20m (2%)      0 (0%)      10Mi (0%)        0 (0%)         9m43s
  kube-system                 kube-dns-b4f5c58c7-xdd6k                            260m (27%)    0 (0%)      110Mi (3%)       210Mi (7%)     9m9s
  kube-system                 kube-proxy-gke-mytest-default-pool-68a56948-ph6b    100m (10%)    0 (0%)      0 (0%)           0 (0%)         8m22s
  kube-system                 pdcsi-node-p2c5j                                    10m (1%)      0 (0%)      20Mi (0%)        100Mi (3%)     9m34s
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource                   Requests     Limits
  --------                   --------     ------
  cpu                        493m (52%)   0 (0%)
  memory                     420Mi (14%)  890Mi (31%)
  ephemeral-storage          0 (0%)       0 (0%)
  hugepages-1Gi              0 (0%)       0 (0%)
  hugepages-2Mi              0 (0%)       0 (0%)
  attachable-volumes-gce-pd  0            0
Events:
  Type     Reason                   Age                    From             Message
  ----     ------                   ----                   ----             -------
  Normal   Starting                 10m                    kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      10m                    kubelet          invalid capacity 0 on image filesystem
  Normal   NodeAllocatableEnforced  10m                    kubelet          Updated Node Allocatable limit across pods
  Normal   NodeHasNoDiskPressure    10m (x7 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-ph6b status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     10m (x7 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-ph6b status is now: NodeHasSufficientPID
  Normal   NodeHasSufficientMemory  10m (x8 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-ph6b status is now: NodeHasSufficientMemory
  Normal   Starting                 9m34s                  kube-proxy       Starting kube-proxy.
  Warning  ContainerdStart          9m33s (x2 over 9m33s)  systemd-monitor  Starting containerd container runtime...
  Warning  DockerStart              9m33s (x3 over 9m33s)  systemd-monitor  Starting Docker Application Container Engine...
  Warning  KubeletStart             9m33s                  systemd-monitor  Started Kubernetes kubelet.
  Warning  NodeSysctlChange         9m33s                  sysctl-monitor   {"unmanaged": {"net.netfilter.nf_conntrack_buckets": "32768"}}


Name:               gke-mytest-default-pool-68a56948-r411
Roles:              <none>
Labels:             beta.kubernetes.io/arch=amd64
                    beta.kubernetes.io/instance-type=e2-medium
                    beta.kubernetes.io/os=linux
                    cloud.google.com/gke-boot-disk=pd-standard
                    cloud.google.com/gke-container-runtime=containerd
                    cloud.google.com/gke-nodepool=default-pool
                    cloud.google.com/gke-os-distribution=cos
                    cloud.google.com/machine-family=e2
                    failure-domain.beta.kubernetes.io/region=us-west2
                    failure-domain.beta.kubernetes.io/zone=us-west2-a
                    kubernetes.io/arch=amd64
                    kubernetes.io/hostname=gke-mytest-default-pool-68a56948-r411
                    kubernetes.io/os=linux
                    node.kubernetes.io/instance-type=e2-medium
                    topology.gke.io/zone=us-west2-a
                    topology.kubernetes.io/region=us-west2
                    topology.kubernetes.io/zone=us-west2-a
Annotations:        container.googleapis.com/instance_id: 4128147853159046045
                    csi.volume.kubernetes.io/nodeid:
                      {"pd.csi.storage.gke.io":"projects/my-project-64389/zones/us-west2-a/instances/gke-mytest-default-pool-68a56948-r411"}
                    node.alpha.kubernetes.io/ttl: 0
                    node.gke.io/last-applied-node-labels:
                      cloud.google.com/gke-boot-disk=pd-standard,cloud.google.com/gke-container-runtime=containerd,cloud.google.com/gke-nodepool=default-pool,cl...
                    volumes.kubernetes.io/controller-managed-attach-detach: true
CreationTimestamp:  Fri, 29 Oct 2021 07:42:38 +0000
Taints:             <none>
Unschedulable:      false
Lease:
  HolderIdentity:  gke-mytest-default-pool-68a56948-r411
  AcquireTime:     <unset>
  RenewTime:       Fri, 29 Oct 2021 07:52:08 +0000
Conditions:
  Type                          Status  LastHeartbeatTime                 LastTransitionTime                Reason                          Message
  ----                          ------  -----------------                 ------------------                ------                          -------
  KernelDeadlock                False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   KernelHasNoDeadlock             kernel has no deadlock
  ReadonlyFilesystem            False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   FilesystemIsNotReadOnly         Filesystem is not read-only
  CorruptDockerOverlay2         False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoCorruptDockerOverlay2         docker overlay2 is functioning properly
  FrequentUnregisterNetDevice   False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentUnregisterNetDevice   node is functioning properly
  FrequentKubeletRestart        False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentKubeletRestart        kubelet is functioning properly
  FrequentDockerRestart         False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentDockerRestart         docker is functioning properly
  FrequentContainerdRestart     False   Fri, 29 Oct 2021 07:47:41 +0000   Fri, 29 Oct 2021 07:42:39 +0000   NoFrequentContainerdRestart     containerd is functioning properly
  NetworkUnavailable            False   Fri, 29 Oct 2021 07:42:55 +0000   Fri, 29 Oct 2021 07:42:55 +0000   RouteCreated                    RouteController created a route
  MemoryPressure                False   Fri, 29 Oct 2021 07:49:20 +0000   Fri, 29 Oct 2021 07:42:28 +0000   KubeletHasSufficientMemory      kubelet has sufficient memory available
  DiskPressure                  False   Fri, 29 Oct 2021 07:49:20 +0000   Fri, 29 Oct 2021 07:42:28 +0000   KubeletHasNoDiskPressure        kubelet has no disk pressure
  PIDPressure                   False   Fri, 29 Oct 2021 07:49:20 +0000   Fri, 29 Oct 2021 07:42:28 +0000   KubeletHasSufficientPID         kubelet has sufficient PID available
  Ready                         True    Fri, 29 Oct 2021 07:49:20 +0000   Fri, 29 Oct 2021 07:42:39 +0000   KubeletReady                    kubelet is posting ready status. AppArmor enabled
Addresses:
  InternalIP:   10.168.0.2
  ExternalIP:   35.236.28.244
  InternalDNS:  gke-mytest-default-pool-68a56948-r411.us-west2-a.c.my-project-64389.internal
  Hostname:     gke-mytest-default-pool-68a56948-r411.us-west2-a.c.my-project-64389.internal
Capacity:
  attachable-volumes-gce-pd:  15
  cpu:                        2
  ephemeral-storage:          98868448Ki
  hugepages-1Gi:              0
  hugepages-2Mi:              0
  memory:                     4031628Ki
  pods:                       110
Allocatable:
  attachable-volumes-gce-pd:  15
  cpu:                        940m
  ephemeral-storage:          47093746742
  hugepages-1Gi:              0
  hugepages-2Mi:              0
  memory:                     2885772Ki
  pods:                       110
System Info:
  Machine ID:                 0ce603ebf8a1bb7de37643bdaf42eaed
  System UUID:                0ce603eb-f8a1-bb7d-e376-43bdaf42eaed
  Boot ID:                    183a93c8-c4cd-467f-9d4f-6197f2d6f17b
  Kernel Version:             5.4.120+
  OS Image:                   Container-Optimized OS from Google
  Operating System:           linux
  Architecture:               amd64
  Container Runtime Version:  containerd://1.4.4
  Kubelet Version:            v1.20.10-gke.301
  Kube-Proxy Version:         v1.20.10-gke.301
PodCIDR:                      10.0.2.0/24
PodCIDRs:                     10.0.2.0/24
ProviderID:                   gce://my-project-64389/us-west2-a/gke-mytest-default-pool-68a56948-r411
Non-terminated Pods:          (9 in total)
  Namespace                   Name                                                CPU Requests  CPU Limits  Memory Requests  Memory Limits  Age
  ---------                   ----                                                ------------  ----------  ---------------  -------------  ---
  kube-system                 event-exporter-gke-67986489c8-k7nm8                 0 (0%)        0 (0%)      0 (0%)           0 (0%)         9m49s
  kube-system                 fluentbit-gke-ncbch                                 100m (10%)    0 (0%)      200Mi (7%)       500Mi (17%)    9m34s
  kube-system                 gke-metrics-agent-766nr                             3m (0%)       0 (0%)      50Mi (1%)        50Mi (1%)      9m34s
  kube-system                 konnectivity-agent-6c974dbc6b-xszm6                 0 (0%)        0 (0%)      30Mi (1%)        30Mi (1%)      8m56s
  kube-system                 konnectivity-agent-autoscaler-6cb774c9cc-fc87j      10m (1%)      0 (0%)      0 (0%)           0 (0%)         9m43s
  kube-system                 kube-proxy-gke-mytest-default-pool-68a56948-r411    100m (10%)    0 (0%)      0 (0%)           0 (0%)         9m24s
  kube-system                 l7-default-backend-56cb9644f6-xk2xk                 10m (1%)      10m (1%)    20Mi (0%)        20Mi (0%)      9m50s
  kube-system                 metrics-server-v0.3.6-9c5bbf784-2fr7c               48m (5%)      143m (15%)  105Mi (3%)       355Mi (12%)    8m51s
  kube-system                 pdcsi-node-gdnlz                                    10m (1%)      0 (0%)      20Mi (0%)        100Mi (3%)     9m35s
Allocated resources:
  (Total limits may be over 100 percent, i.e., overcommitted.)
  Resource                   Requests     Limits
  --------                   --------     ------
  cpu                        281m (29%)   153m (16%)
  memory                     425Mi (15%)  1055Mi (37%)
  ephemeral-storage          0 (0%)       0 (0%)
  hugepages-1Gi              0 (0%)       0 (0%)
  hugepages-2Mi              0 (0%)       0 (0%)
  attachable-volumes-gce-pd  0            0
Events:
  Type     Reason                   Age                    From             Message
  ----     ------                   ----                   ----             -------
  Normal   Starting                 10m                    kubelet          Starting kubelet.
  Warning  InvalidDiskCapacity      10m                    kubelet          invalid capacity 0 on image filesystem
  Normal   NodeAllocatableEnforced  10m                    kubelet          Updated Node Allocatable limit across pods
  Normal   NodeHasNoDiskPressure    10m (x7 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-r411 status is now: NodeHasNoDiskPressure
  Normal   NodeHasSufficientPID     10m (x7 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-r411 status is now: NodeHasSufficientPID
  Normal   NodeHasSufficientMemory  10m (x8 over 10m)      kubelet          Node gke-mytest-default-pool-68a56948-r411 status is now: NodeHasSufficientMemory
  Normal   Starting                 9m35s                  kube-proxy       Starting kube-proxy.
  Warning  ContainerdStart          9m34s (x2 over 9m34s)  systemd-monitor  Starting containerd container runtime...
  Warning  DockerStart              9m34s (x3 over 9m34s)  systemd-monitor  Starting Docker Application Container Engine...
  Warning  KubeletStart             9m34s                  systemd-monitor  Started Kubernetes kubelet.
  Warning  NodeSysctlChange         9m34s                  sysctl-monitor   {"unmanaged": {"net.netfilter.nf_conntrack_buckets": "32768"}}
hgsat123@cloudshell:~ (my-project-64389)$

---- metrics-server----
hgsat123@cloudshell:~ (my-project-64389)$ kubectl get deploy metrics-server-v0.3.6 -n kube-system -o yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  annotations:
    deployment.kubernetes.io/revision: "3"
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apps/v1","kind":"Deployment","metadata":{"annotations":{},"labels":{"addonmanager.kubernetes.io/mode":"Reconcile","k8s-app":"metrics-server","kubernetes.io/cluster-service":"true","version":"v0.3.6"},"name":"metrics-server-v0.3.6","namespace":"kube-system"},"spec":{"selector":{"matchLabels":{"k8s-app":"metrics-server","version":"v0.3.6"}},"template":{"metadata":{"labels":{"k8s-app":"metrics-server","version":"v0.3.6"},"name":"metrics-server"},"spec":{"containers":[{"command":["/metrics-server","--metric-resolution=30s","--kubelet-port=10255","--deprecated-kubelet-completely-insecure=true","--kubelet-preferred-address-types=InternalIP,Hostname,InternalDNS,ExternalDNS,ExternalIP"],"image":"k8s.gcr.io/metrics-server-amd64:v0.3.6","name":"metrics-server","ports":[{"containerPort":443,"name":"https","protocol":"TCP"}]},{"command":["/pod_nanny","--config-dir=/etc/config","--cpu=40m","--extra-cpu=0.5m","--memory=35Mi","--extra-memory=4Mi","--threshold=5","--deployment=metrics-server-v0.3.6","--container=metrics-server","--poll-period=300000","--estimator=exponential","--scale-down-delay=24h","--minClusterSize=5","--use-metrics=true"],"env":[{"name":"MY_POD_NAME","valueFrom":{"fieldRef":{"fieldPath":"metadata.name"}}},{"name":"MY_POD_NAMESPACE","valueFrom":{"fieldRef":{"fieldPath":"metadata.namespace"}}}],"image":"gke.gcr.io/addon-resizer:1.8.11-gke.0","name":"metrics-server-nanny","resources":{"limits":{"cpu":"100m","memory":"300Mi"},"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"mountPath":"/etc/config","name":"metrics-server-config-volume"}]}],"nodeSelector":{"kubernetes.io/os":"linux"},"priorityClassName":"system-cluster-critical","securityContext":{"seccompProfile":{"type":"RuntimeDefault"}},"serviceAccountName":"metrics-server","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"components.gke.io/gke-managed-components","operator":"Exists"}],"volumes":[{"configMap":{"name":"metrics-server-config"},"name":"metrics-server-config-volume"}]}}}}
  creationTimestamp: "2021-10-29T07:42:25Z"
  generation: 3
  labels:
    addonmanager.kubernetes.io/mode: Reconcile
    k8s-app: metrics-server
    kubernetes.io/cluster-service: "true"
    version: v0.3.6
  name: metrics-server-v0.3.6
  namespace: kube-system
  resourceVersion: "1363"
  uid: 902402c3-a5f8-4800-b5b6-5b8e305a8ff6
spec:
  progressDeadlineSeconds: 600
  replicas: 1
  revisionHistoryLimit: 10
  selector:
    matchLabels:
      k8s-app: metrics-server
      version: v0.3.6
  strategy:
    rollingUpdate:
      maxSurge: 25%
      maxUnavailable: 25%
    type: RollingUpdate
  template:
    metadata:
      creationTimestamp: null
      labels:
        k8s-app: metrics-server
        version: v0.3.6
      name: metrics-server
    spec:
      containers:
      - command:
        - /metrics-server
        - --metric-resolution=30s
        - --kubelet-port=10255
        - --deprecated-kubelet-completely-insecure=true
        - --kubelet-preferred-address-types=InternalIP,Hostname,InternalDNS,ExternalDNS,ExternalIP
        image: k8s.gcr.io/metrics-server-amd64:v0.3.6
        imagePullPolicy: IfNotPresent
        name: metrics-server
        ports:
        - containerPort: 443
          name: https
          protocol: TCP
        resources:
          limits:
            cpu: 43m
            memory: 55Mi
          requests:
            cpu: 43m
            memory: 55Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
      - command:
        - /pod_nanny
        - --config-dir=/etc/config
        - --cpu=40m
        - --extra-cpu=0.5m
        - --memory=35Mi
        - --extra-memory=4Mi
        - --threshold=5
        - --deployment=metrics-server-v0.3.6
        - --container=metrics-server
        - --poll-period=300000
        - --estimator=exponential
        - --scale-down-delay=24h
        - --minClusterSize=5
        - --use-metrics=true
        env:
        - name: MY_POD_NAME
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.name
        - name: MY_POD_NAMESPACE
          valueFrom:
            fieldRef:
              apiVersion: v1
              fieldPath: metadata.namespace
        image: gke.gcr.io/addon-resizer:1.8.11-gke.0
        imagePullPolicy: IfNotPresent
        name: metrics-server-nanny
        resources:
          limits:
            cpu: 100m
            memory: 300Mi
          requests:
            cpu: 5m
            memory: 50Mi
        terminationMessagePath: /dev/termination-log
        terminationMessagePolicy: File
        volumeMounts:
        - mountPath: /etc/config
          name: metrics-server-config-volume
      dnsPolicy: ClusterFirst
      nodeSelector:
        kubernetes.io/os: linux
      priorityClassName: system-cluster-critical
      restartPolicy: Always
      schedulerName: default-scheduler
      securityContext:
        seccompProfile:
          type: RuntimeDefault
      serviceAccount: metrics-server
      serviceAccountName: metrics-server
      terminationGracePeriodSeconds: 30
      tolerations:
      - key: CriticalAddonsOnly
        operator: Exists
      - key: components.gke.io/gke-managed-components
        operator: Exists
      volumes:
      - configMap:
          defaultMode: 420
          name: metrics-server-config
        name: metrics-server-config-volume
status:
  availableReplicas: 1
  conditions:
  - lastTransitionTime: "2021-10-29T07:43:09Z"
    lastUpdateTime: "2021-10-29T07:43:09Z"
    message: Deployment has minimum availability.
    reason: MinimumReplicasAvailable
    status: "True"
    type: Available
  - lastTransitionTime: "2021-10-29T07:42:25Z"
    lastUpdateTime: "2021-10-29T07:43:40Z"
    message: ReplicaSet "metrics-server-v0.3.6-9c5bbf784" has successfully progressed.
    reason: NewReplicaSetAvailable
    status: "True"
    type: Progressing
  observedGeneration: 3
  readyReplicas: 1
  replicas: 1
  updatedReplicas: 1
hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$


----
gcloud container clusters create CLUSTER_NAME \
    --release-channel CHANNEL \
    --zone COMPUTE_ZONE \
    --node-locations COMPUTE_ZONE,COMPUTE_ZONE1

Using the static default version:
----------------------
gcloud container clusters create CLUSTER_NAME \
    --release-channel None \
    --zone COMPUTE_ZONE \
    --node-locations COMPUTE_ZONE,COMPUTE_ZONE1

gcloud container clusters create example-cluster \
    --zone us-central1-a \
    --node-locations us-central1-a,us-central1-b,us-central1-c

gcloud container clusters create my-regional-cluster \
    --region us-west1 \
    --node-locations us-west1-c \
    --num-nodes 2

gcloud container clusters create-auto CLUSTER_NAME \
    --region REGION \
    --project=PROJECT_ID

gcloud compute routers create NAT_ROUTER \
    --network NETWORK \
    --region REGION \
    --project=PROJECT_ID

unset metadata
gcloud compute project-info remove-metadata \
   --keys=google-compute-default-region,google-compute-default-zone


gcloud config set compute/region <region>
gcloud config unset compute/zone <zone>
gcloud config unset compute/region <region>

export CLOUDSDK_COMPUTE_REGION=REGION
export CLOUDSDK_COMPUTE_ZONE=Zone

https://cloud.google.com/compute/docs/gcloud-compute

=====
hgsat123@cloudshell:/tmp (my-project-64389)$ gcloud init
Welcome! This command will take you through the configuration of gcloud.

Settings from your current configuration [cloudshell-24133] are:
accessibility:
  screen_reader: 'True'
component_manager:
  disable_update_check: 'True'
compute:
  gce_metadata_read_timeout_sec: '30'
core:
  account: hgsat123@gmail.com
  disable_usage_reporting: 'True'
  project: my-project-64389
metrics:
  environment: devshell

Pick configuration to use:
 [1] Re-initialize this configuration [cloudshell-24133] with new settings
 [2] Create a new configuration
Please enter your numeric choice:  1

Your current configuration has been set to: [cloudshell-24133]

You can skip diagnostics next time by using the following flag:
  gcloud init --skip-diagnostics

Network diagnostic detects and fixes local network connection issues.
Checking network connection...done.     
Reachability Check passed.
Network diagnostic passed (1/1 checks passed).

Choose the account you would like to use to perform operations for this configuration:
 [1] hgsat123@gmail.com
 [2] Log in with a new account
Please enter your numeric choice:  1

You are logged in as: [hgsat123@gmail.com].

Pick cloud project to use:
 [1] my-project-64389
 [2] Create a new project
Please enter numeric choice or text value (must exactly match list item):  1

Your current project has been set to: [my-project-64389].

Your project default Compute Engine zone has been set to [us-west2-a].
You can change it by running [gcloud config set compute/zone NAME].

Your project default Compute Engine region has been set to [us-west2].
You can change it by running [gcloud config set compute/region NAME].

Your Google Cloud SDK is configured and ready to use!

* Commands that require authentication will use hgsat123@gmail.com by default
* Commands will reference project `my-project-64389` by default
* Compute Engine commands will use region `us-west2` by default
* Compute Engine commands will use zone `us-west2-a` by default

Run `gcloud help config` to learn how to change individual settings

This gcloud configuration is called [cloudshell-24133]. You can create additional configurations if you work with multiple accounts and/or projects.
Run `gcloud topic configurations` to learn more.

Some things to try next:

* Run `gcloud --help` to see the Cloud Platform services you can interact with. And run `gcloud help COMMAND` to get help on any gcloud command.
* Run `gcloud topic --help` to learn about advanced features of the SDK like arg files and output formatting

====
$ gcloud compute machine-types list

----
hgsat123@cloudshell:~ (my-project-64389)$
hgsat123@cloudshell:~ (my-project-64389)$ gcloud container clusters describe mytest
addonsConfig:
  gcePersistentDiskCsiDriverConfig:
    enabled: true
  kubernetesDashboard:
    disabled: true
  networkPolicyConfig:
    disabled: true
clusterIpv4Cidr: 10.0.0.0/14
createTime: '2021-10-29T07:39:46+00:00'
currentMasterVersion: 1.20.10-gke.301
currentNodeCount: 3
currentNodeVersion: 1.20.10-gke.301
databaseEncryption:
  state: DECRYPTED
endpoint: 35.236.84.176
id: 51857e3bd4964f58b6998f6d8a143320905e35ddbd0b4df3b81dff748d82eeb9
initialClusterVersion: 1.20.10-gke.301
instanceGroupUrls:
- https://www.googleapis.com/compute/v1/projects/my-project-64389/zones/us-west2-a/instanceGroupManagers/gke-mytest-default-pool-68a56948-grp
ipAllocationPolicy:
  useRoutes: true
labelFingerprint: a9dc16a7
legacyAbac: {}
location: us-west2-a
locations:
- us-west2-a
loggingConfig:
  componentConfig:
    enableComponents:
    - SYSTEM_COMPONENTS
    - WORKLOADS
loggingService: logging.googleapis.com/kubernetes
maintenancePolicy:
  resourceVersion: e3b0c442
masterAuth:
  clusterCaCertificate: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVMVENDQXBXZ0F3SUJBZ0lSQU1OV25uelRpVTNySkNzaGVGdXgvSmN3RFFZSktvWklodmNOQVFFTEJRQXcKTHpFdE1Dc0dBMVVFQXhNa05EY3pNelJqTXpFdFltVTNNUzAwWVRJeExUaGlObVV0TkRObU5XTTBabVk0WWpjNApNQ0FYRFRJeE1UQXlPVEEyTXprMU1Gb1lEekl3TlRFeE1ESXlNRGN6T1RVd1dqQXZNUzB3S3dZRFZRUURFeVEwCk56TXpOR016TVMxaVpUY3hMVFJoTWpFdE9HSTJaUzAwTTJZMVl6Um1aamhpTnpnd2dnR2lNQTBHQ1NxR1NJYjMKRFFFQkFRVUFBNElCandBd2dnR0tBb0lCZ1FDMFlobC9VQkxJdXdwS0JSWUxnUmZ2M2MzSkQ0WkQ0c0wrMlpsMwpTMUR0TU1xOHB4OWxZTG4yVnF5RWhkYmNJOTRGV0QwQk5HUXBCa3JyM2twVkl6NkJqQmw0SHJocXYrSityazAwCkxCaE5sc1ZHR3p2dkRKbGQvYWJKVHg3V2MzYW9DWWdDV00zdmtuWVRwNVZGakZxZ2VKYXJ3WGdPYTg0cTRLNUEKVUQraFJCeW9QOGVVMzhObVJJK3ZUNkEyWFJGdGhnQ282QjJXTXZ5dkp4US9PRTh5cFZRVFhuaWNMMkFHM1VLdQpDMlZ2YnBJa2NJS3BnNWpsbndqSCtzdnFJUzNBTWltay9BL3ExbDdCWk9EZWswTWRJWkVmVmZzT2VMT1FkV2VVClV1MFJ4cnJKMUZoRnJLTWc1Q2hDM0pMRXNndnNHT0x4aHRDU2N6R0NqQk4vTUR2dTZqYkF4YmlIVEJRcUV5WUkKTUY1am5kZ0s0djhrSDlYVGord0wrdjFTR2x0SGIrRWY3bFI1NXdKa2hCcGtaQ0RRckp0NzRmME40bE1XWnlDawpkRGJkcFlTa3ROR3hmSU81Y0FWc1dnRjJrUUM3NC9yOUFId05mQ3VGUEtLVjRHa1VzUVB1bDV6ZjgzTFdzMDJyClNmOHlKZFpWSHRMaHFwS2wzOEhrblBxVzN0c0NBd0VBQWFOQ01FQXdEZ1lEVlIwUEFRSC9CQVFEQWdJRU1BOEcKQTFVZEV3RUIvd1FGTUFNQkFmOHdIUVlEVlIwT0JCWUVGRTM1cVFhc3J4VnoxTmllQjhCdUNjVEJIUkpkTUEwRwpDU3FHU0liM0RRRUJDd1VBQTRJQmdRQnlsdCtibEVlRGp0Qjg2K3JmZFZhbCtCMHJGc1lqMW9XeDNOcnBrY0c0CmtmMU5XQkFOcnBsbzl3VVNnZVJsdGM2ajNTbU5KMmRkVjFRUSswMUlwMURmMzZKTU9yakZTUnJ1M1VVUUpzZTIKSUFQdVN2Y0cwTW9jbmhiYzBhS0w1TW52N3ZaYmFHZUUwWVNRREo0Rm5udFR1VEVyMWd5RHRrVnRQR0txRVlIQwpRdGhmUytiZXlpVXVpSnZYTkJsOTAzM3l4VVNLc2JuRzRoK1NZMzFMNFRPSGdMbnpyOEI2V2hJd3lEYm1SRXhDCjUrdjBicGdnQnRHUVJKZGtydis2akpnemhhNDk3S2pGWmJZTWE3Rm15bHFQY3hVY2JxUGo0TEdabDVtdm51QlYKQWZ3d0dUajIwTi9PWk9RbFlaM21SMFY5dWNoSk55NVlzTU5JakFVYlUwajE2QmVUdklPMldzMVNFM3JkV0hvOQpkYXUrMmlrVzN6OThCYnNCN1VETEJFUkZ5YWpNVHJuUG9mR2t3blJwV0t3QzIrUkFQTE1sdjNzbFJzcFFjUE1HCkxMMkgwcFVFSnZ6RjdnK0llV082U1lZUlN5QU10Tk9PREFrS25Say9QWkxZNnFFb3dPVkhBNStpdzlBQTN0WEkKcUJMOGhPeVNzODVUUFhsOC96VmdUZVk9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K
monitoringConfig:
  componentConfig:
    enableComponents:
    - SYSTEM_COMPONENTS
monitoringService: monitoring.googleapis.com/kubernetes
name: mytest
network: default
networkConfig:
  network: projects/my-project-64389/global/networks/default
  subnetwork: projects/my-project-64389/regions/us-west2/subnetworks/default
nodeConfig:
  diskSizeGb: 100
  diskType: pd-standard
  imageType: COS_CONTAINERD
  machineType: e2-medium
  metadata:
    disable-legacy-endpoints: 'true'
  oauthScopes:
  - https://www.googleapis.com/auth/devstorage.read_write
  - https://www.googleapis.com/auth/projecthosting
  - https://www.googleapis.com/auth/logging.write
  - https://www.googleapis.com/auth/monitoring
  serviceAccount: default
  shieldedInstanceConfig:
    enableIntegrityMonitoring: true
nodeIpv4CidrSize: 24
nodePoolDefaults:
  nodeConfigDefaults: {}
nodePools:
- config:
    diskSizeGb: 100
    diskType: pd-standard
    imageType: COS_CONTAINERD
    machineType: e2-medium
    metadata:
      disable-legacy-endpoints: 'true'
    oauthScopes:
    - https://www.googleapis.com/auth/devstorage.read_write
    - https://www.googleapis.com/auth/projecthosting
    - https://www.googleapis.com/auth/logging.write
    - https://www.googleapis.com/auth/monitoring
    serviceAccount: default
    shieldedInstanceConfig:
      enableIntegrityMonitoring: true
  initialNodeCount: 3
  instanceGroupUrls:
  - https://www.googleapis.com/compute/v1/projects/my-project-64389/zones/us-west2-a/instanceGroupManagers/gke-mytest-default-pool-68a56948-grp
  locations:
  - us-west2-a
  management:
    autoRepair: true
    autoUpgrade: true
  name: default-pool
  podIpv4CidrSize: 24
  selfLink: https://container.googleapis.com/v1/projects/my-project-64389/zones/us-west2-a/clusters/mytest/nodePools/default-pool
  status: RUNNING
  upgradeSettings:
    maxSurge: 1
  version: 1.20.10-gke.301
notificationConfig:
  pubsub: {}
releaseChannel:
  channel: REGULAR
selfLink: https://container.googleapis.com/v1/projects/my-project-64389/zones/us-west2-a/clusters/mytest
servicesIpv4Cidr: 10.3.240.0/20
shieldedNodes:
  enabled: true
status: RUNNING
subnetwork: default
zone: us-west2-a



hgsat123@cloudshell:~ (my-project-64389)$ gcloud container clusters delete mytest --zone=us-west2-a
The following clusters will be deleted.
 - [mytest] in [us-west2-a]

Do you want to continue (Y/n)?  Y

Deleting cluster mytest...done.     
Deleted [https://container.googleapis.com/v1/projects/my-project-64389/zones/us-west2-a/clusters/mytest].
